<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>URL Shortener</title>
    <link rel="stylesheet" href="styles.css">
    <script type="module">
        // Import Firebase SDK (using modular syntax)
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
        import { getFirestore, collection, doc, setDoc } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";

        // Firebase configuration (replace with your actual values)
 const firebaseConfig = {
  apiKey: "AIzaSyDB7ISeqMg9amQMqSC-RmVKVh8F6CV1vT8",
  authDomain: "url-shortner-9afc0.firebaseapp.com",
  projectId: "url-shortner-9afc0",
  storageBucket: "url-shortner-9afc0.firebasestorage.app",
  messagingSenderId: "29716485939",
  appId: "1:29716485939:web:947b3b4a9b7f0c79189046"
};
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Function to shorten URL
        async function shortenUrl() {
            const longUrl = document.getElementById("longUrl").value;
            if (!longUrl) {
                alert("Please enter a URL.");
                return;
            }

            // Generate a random 6-digit short code
            const shortCode = Math.floor(100000 + Math.random() * 900000).toString();

            try {
                await setDoc(doc(collection(db, "shortUrls"), shortCode), {
                    longURL: longUrl,
                    clicks: 0
                });

                document.getElementById("result").innerHTML = 
                    `Shortened: <a href="/${shortCode}">yourusername.github.io/${shortCode}</a>`;

            } catch (error) {
                console.error("Error adding document: ", error);
                alert("Error saving URL. Check console for details.");
            }
        }

        // Attach function to button
        window.shortenUrl = shortenUrl;

    </script>
</head>
<body>
    <div class="container">
        <h1>Shorten a URL</h1>
        <input type="text" id="longUrl" placeholder="Enter URL">
        <button onclick="shortenUrl()">Shorten</button>
        <p id="result"></p>
    </div>
</body>
</html>
